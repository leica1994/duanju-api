# 短剧资源管理系统 API 文档

## 📖 服务简介

本文档提供短剧搜索服务 API 的对接指南，包括 API 功能、请求参数、返回数据格式及示例。

🎯 **核心功能**：

- 提供夸克网盘短剧资源搜索服务
- 支持中文分词智能搜索
- 海量资源库（20000+ 短剧资源）
- 实时更新资源状态
- 完整分页支持

✨ **服务特色**：

- **永久免费** - 无使用限制，完全免费提供
- **接口稳定** - 高可用性设计，稳定性保障
- **响应快速** - 内存缓存优化，毫秒级响应
- **无广告干扰** - 纯净接口服务，无任何广告内容
- **欢迎对接** - 开放接口，支持各类应用集成

## 🎬 API 基础信息

- **基础 URL**: [https://duanju.deno.dev](https://duanju.deno.dev)
- **响应格式**: JSON
- **字符编码**: UTF-8

## 📋 统一响应格式

### 基础响应格式

所有接口均返回统一的 JSON 格式：

```json
{
  "code": 200,           // 状态码
  "msg": "成功信息",      // 提示信息
  "data": []             // 数据内容
}
```

### 分页响应格式

分页接口（`/api/list` 和 `/api/search`）返回额外的分页信息：

```json
{
  "code": 200,           // 状态码
  "msg": "成功信息",      // 提示信息
  "data": [],            // 数据数组
  "total": 22088,        // 总记录数
  "page": 1,             // 当前页码
  "page_size": 100,      // 每页记录数
  "total_pages": 221     // 总页数
}
```

### 资源数据结构

```json
{
  "name": "资源名称",
  "link": "资源链接",
  "time": "2025-01-15 10:30:00"
}
```

## 🔍 API 接口列表

### 1. 搜索资源

**接口描述**：根据关键词搜索短剧资源，支持中文分词和智能匹配，支持分页

**请求方式**：`GET /api/search`

**请求参数**：

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|---|---|---|---|---|
| q | string | 是 | - | 搜索关键词 |
| page | integer | 否 | 1 | 页码，从1开始 |
| page_size | integer | 否 | 100 | 每页数量，1-500 |

**请求示例**：

```http
GET /api/search?q=都市
GET /api/search?q=爱情&page=2&page_size=20
```

**响应示例**：

```json
{
  "code": 200,
  "msg": "搜索成功",
  "total": 156,          // 搜索到的总记录数
  "page": 1,             // 当前页码
  "page_size": 20,       // 每页记录数
  "total_pages": 8,      // 总页数
  "data": [
    {
      "name": "都市仙医",
      "link": "https://pan.quark.cn/s/abc123",
      "time": "2025-01-15 14:30:00"
    },
    {
      "name": "都市神医",
      "link": "https://pan.quark.cn/s/def456",
      "time": "2025-01-15 10:20:00"
    }
  ]
}
```

---

### 2. 分页查询列表

**接口描述**：分页获取短剧资源列表，支持搜索过滤，返回完整分页信息

**请求方式**：`GET /api/list`

**请求参数**：

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|---|---|---|---|---|
| q | string | 否 | - | 搜索关键词（可选） |
| page | integer | 否 | 1 | 页码，从1开始 |
| page_size | integer | 否 | 100 | 每页数量，1-500 |

**请求示例**：

```http
GET /api/list?page=1&page_size=20
GET /api/list?q=总裁&page=2&page_size=50
```

**响应示例**：

```json
{
  "code": 200,
  "msg": "列表获取成功",
  "total": 22088,        // 总记录数
  "page": 1,             // 当前页码
  "page_size": 20,       // 每页记录数
  "total_pages": 1105,   // 总页数
  "data": [
    {
      "name": "霸道总裁爱上我",
      "link": "https://pan.quark.cn/s/xyz789",
      "time": "2025-01-15 18:45:00"
    },
    {
      "name": "逆袭人生",
      "link": "https://pan.quark.cn/s/qwe123",
      "time": "2025-01-15 16:30:00"
    }
    // ... 更多数据
  ]
}
```

---

### 3. 获取全部资源

**接口描述**：获取全部短剧资源

**请求方式**：`GET /api/all`

**请求参数**：无

**请求示例**：

```http
GET /api/all
```

**响应示例**：

```json
{
  "code": 200,
  "msg": "全量数据获取成功，共 23456 条记录",
  "data": [
    {
      "name": "绝世高手",
      "link": "https://pan.quark.cn/s/aaa111",
      "time": "2025-01-15 20:00:00"
    },
    {
      "name": "都市修仙",
      "link": "https://pan.quark.cn/s/bbb222",
      "time": "2025-01-15 19:45:00"
    }
    // ... 更多数据
  ]
}
```

---

### 4. 今日更新

**接口描述**：获取今天更新的所有短剧资源

**请求方式**：`GET /api/today`

**请求参数**：无

**请求示例**：

```http
GET /api/today
```

**响应示例**：

```json
{
  "code": 200,
  "msg": "今日更新",
  "data": [
    {
      "name": "今日新剧：重生之王",
      "link": "https://pan.quark.cn/s/new123",
      "time": "2025-01-15 22:30:00"
    },
    {
      "name": "今日热播：甜蜜暴击",
      "link": "https://pan.quark.cn/s/hot456",
      "time": "2025-01-15 21:15:00"
    }
  ]
}
```

---

### 5. 健康检查

**接口描述**：检查服务健康状态

**请求方式**：`GET /health`

**请求参数**：无

**请求示例**：

```http
GET /health
```

**响应示例**：

```json
{
  "status": "healthy"
}
```

## 📝 注意事项

1. **搜索功能**：支持中文分词，自动过滤停用词，优先精确匹配
2. **分页限制**：单页最大返回 500 条数据
3. **缓存机制**：`/api/all` 接口每小时更新一次
4. **时间格式**：所有时间字段均为 `YYYY-MM-DD HH:MM:SS` 格式
5. **分页信息**：`/api/list` 和 `/api/search` 接口返回完整分页信息

## 🔗 相关链接

- **在线 API 文档**: [https://duanju.deno.dev/docs](https://duanju.deno.dev/docs)
- **健康检查端点**: [https://duanju.deno.dev/health](https://duanju.deno.dev/health)